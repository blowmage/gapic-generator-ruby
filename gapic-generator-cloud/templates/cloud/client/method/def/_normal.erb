<%- assert_locals method -%>
##
<%- if method.doc_description -%>
<%= indent method.doc_description, "# " %>
<%- end -%>
#
<%- method.fields.each do |field| -%>
# @param <%= field.name %> [<%= field.doc_types %>]
<%- if field.doc_description -%>
<%= indent field.doc_description, "#   " %>
<%- end -%>
<%- end -%>
# @param options [Google::Gax::CallOptions]
#   Overrides the default settings for this call, e.g, timeout, retries, etc.
#
# @yield [result, operation] Access the result along with the RPC operation
# @yieldparam result [<%= method.return_type %>]
# @yieldparam operation [GRPC::ActiveCall::Operation]
#
# @return [<%= method.return_type %>]
# @raise [Google::Gax::GaxError] if the RPC is aborted.
# @example
<%= indent method.code_example, "#   " %>
#
def <%= method.name %> \
<%- method.fields.each do |field| -%>
    <%= field.name %>,
<%- end -%>
    options: nil,
    &block

  request = {
  <%- method.fields.each do |field| -%>
    <%= field.name %>: <%= field.name %>,
  <%- end -%>
  }.delete_if { |_, v| v.nil? }
  request = Google::Gax.to_proto request, <%= method.request_type %>
  <%= method.ivar %>.call(request, options, &block)
end
