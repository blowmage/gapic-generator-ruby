<%- assert_locals service -%>
<% @requires = capture do %>
require "googleauth"
<% end %>
# Credentials for the <%= service.name %> API.
class <%= service.credentials_name %> < Google::Auth::Credentials
  self.scope = [
    <%- client_scopes = service.client_scopes.dup -%>
    <%- last_client_scope = client_scopes.pop -%>
    <%- client_scopes.each do |client_scope| -%>
    <%= client_scope.inspect %>,
    <%- end -%>
    <%= last_client_scope.inspect %>
  ]
  self.env_vars = [
    "<%= service.gem.env_prefix %>_CREDENTIALS",
    "<%= service.gem.env_prefix %>_KEYFILE",
    "GOOGLE_CLOUD_CREDENTIALS",
    "GOOGLE_CLOUD_KEYFILE",
    "GCLOUD_KEYFILE",
    "<%= service.gem.env_prefix %>_CREDENTIALS_JSON",
    "<%= service.gem.env_prefix %>_KEYFILE_JSON",
    "GOOGLE_CLOUD_CREDENTIALS_JSON",
    "GOOGLE_CLOUD_KEYFILE_JSON",
    "GCLOUD_KEYFILE_JSON"
  ]
  self.paths = [
    "~/.config/google_cloud/application_default_credentials.json"
  ]
end
